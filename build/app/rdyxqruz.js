/*! Built with http://stenciljs.com */
const{h:t}=window.App,s=function(t){const s=["webkitTransform","-webkit-transform","webkit-transform","transform"].find(s=>void 0!==t.style[s])||"transform",i=["webkitTransition","transition"].find(s=>void 0!==t.style[s])||"transition",e=i.indexOf("webkit")>-1?"-webkit-":"";return{transitionDurationProp:e+"transition-duration",transitionTimingFnProp:e+"transition-timing-function",transformProp:s,transitionProp:i}}(document.documentElement),i=/(^-?\d*\.?\d*)(.*)/,e=32,n=400,r={translateX:1,translateY:1,translateZ:1,scale:1,scaleX:1,scaleY:1,scaleZ:1,rotate:1,rotateX:1,rotateY:1,rotateZ:1,skewX:1,skewY:1,perspective:1},a=window.requestAnimationFrame||(t=>t());class o{constructor(){this._duration=null,this._easingName=null,this._elements=null,this._destroyed=!1,this.hasChildren=!1,this.isPlaying=!1,this.hasCompleted=!1}addElement(t){if(t)if(t.length)for(let s=0;s<t.length;s++)this._addEl(t[s]);else this._addEl(t);return this}_addEl(t){1===t.nodeType&&(this._elementTotal=(this._elements=this._elements||[]).push(t))}add(t){return t.parent=this,this.hasChildren=!0,this._childAnimationTotal=(this._childAnimations=this._childAnimations||[]).push(t),this}getDuration(t){return t&&null!==t.duration&&void 0!==t.duration?t.duration:null!==this._duration?this._duration:this.parent?this.parent.getDuration():0}isRoot(){return!this.parent}duration(t){return this._duration=t,this}getEasing(){return this._isReverse&&this._reversedEasingName?this._reversedEasingName:null!==this._easingName?this._easingName:this.parent&&this.parent.getEasing()||null}easing(t){return this._easingName=t,this}easingReverse(t){return this._reversedEasingName=t,this}from(t,s){return this._addProp("from",t,s),this}to(t,i,e){const n=this._addProp("to",t,i);return e&&this.afterClearStyles([n.trans?s.transformProp:t]),this}fromTo(t,s,i,e){return this.from(t,s).to(t,i,e)}_getProp(t){if(this._fxProperties)return this._fxProperties.find(s=>s.effectName===t);this._fxProperties=[]}_addProp(t,e,n){let a=this._getProp(e);if(!a){const t=1===r[e];a={effectName:e,trans:t,wc:t?s.transformProp:e},this._fxProperties.push(a)}const o={val:n,num:0,effectUnit:""};if(a[t]=o,"string"==typeof n&&n.indexOf(" ")<0){const t=n.match(i);if(t){const s=parseFloat(t[1]);isNaN(s)||(o.num=s),o.effectUnit=t[0]!==t[2]?t[2]:""}}else"number"==typeof n&&(o.num=n);return a}beforeAddClass(t){return(this._beforeAddClasses=this._beforeAddClasses||[]).push(t),this}beforeRemoveClass(t){return(this._beforeRemoveClasses=this._beforeRemoveClasses||[]).push(t),this}duringAddClass(t){return this.beforeAddClass(t),this.afterRemoveClass(t),this}beforeStyles(t){return this._beforeStyles=t,this}beforeClearStyles(t){this._beforeStyles=this._beforeStyles||{};for(let s=0;s<t.length;s++)this._beforeStyles[t[s]]="";return this}beforeAddRead(t){return(this._readCallbacks=this._readCallbacks||[]).push(t),this}beforeAddWrite(t){return(this._writeCallbacks=this._writeCallbacks||[]).push(t),this}afterAddClass(t){return(this._afterAddClasses=this._afterAddClasses||[]).push(t),this}afterRemoveClass(t){return(this._afterRemoveClasses=this._afterRemoveClasses||[]).push(t),this}afterStyles(t){return this._afterStyles=t,this}afterClearStyles(t){this._afterStyles=this._afterStyles||{};for(let s=0;s<t.length;s++)this._afterStyles[t[s]]="";return this}play(t){const s=this;s._destroyed||(s._isAsync=s._hasDuration(t),s._clearAsync(),s._playInit(t),a(()=>{a(()=>{s._playDomInspect(t)})}))}playAsync(t){return new Promise(s=>(this.onFinish(s,{oneTimeCallback:!0,clearExistingCallacks:!0}),this.play(t),this))}playSync(){if(!this._destroyed){const t={duration:0};this._isAsync=!1,this._clearAsync(),this._playInit(t),this._playDomInspect(t)}}_playInit(t){this._hasTweenEffect=!1,this.isPlaying=!0,this.hasCompleted=!1,this._hasDur=this.getDuration(t)>e;const s=this._childAnimations;for(let i=0;i<this._childAnimationTotal;i++)s[i]._playInit(t);this._hasDur&&(this._progress(0),this._willChange(!0))}_playDomInspect(t){const s=this;s._beforeAnimation();const i=s.getDuration(t);s._isAsync&&s._asyncEnd(i,!0),s._playProgress(t),s._isAsync&&!this._destroyed&&a(()=>{s._playToStep(1)})}_playProgress(t){const s=this._childAnimations;for(let i=0;i<this._childAnimationTotal;i++)s[i]._playProgress(t);this._hasDur?this._setTrans(this.getDuration(t),!1):(this._progress(1),this._setAfterStyles(),this._didFinish(!0))}_playToStep(t){if(!this._destroyed){const s=this._childAnimations;for(let i=0;i<this._childAnimationTotal;i++)s[i]._playToStep(t);this._hasDur&&this._progress(t)}}_asyncEnd(t,s){const i=this;i._unregisterTrnsEnd=function(t,s){let i;const e={passive:!0};function n(){i&&i()}function r(i){t===i.target&&(n(),s(i))}return t&&(t.addEventListener("webkitTransitionEnd",r,e),t.addEventListener("transitionend",r,e),i=function(){t.removeEventListener("webkitTransitionEnd",r,e),t.removeEventListener("transitionend",r,e)}),n}(i._transEl(),function(){i._clearAsync(),i._playEnd(),i._didFinishAll(s,!0,!1)}),i._timerId=setTimeout(function(){i._timerId=void 0,i._clearAsync(),i._playEnd(s?1:0),i._didFinishAll(s,!0,!1)},t+n)}_playEnd(t){const s=this._childAnimations;for(let i=0;i<this._childAnimationTotal;i++)s[i]._playEnd(t);this._hasDur&&(null!==t&&void 0!==t&&(this._setTrans(0,!0),this._progress(t)),this._setAfterStyles(),this._willChange(!1))}_hasDuration(t){if(this.getDuration(t)>e)return!0;const s=this._childAnimations;for(let i=0;i<this._childAnimationTotal;i++)if(s[i]._hasDuration(t))return!0;return!1}_hasDomReads(){if(this._readCallbacks&&this._readCallbacks.length)return!0;const t=this._childAnimations;for(let s=0;s<this._childAnimationTotal;s++)if(t[s]._hasDomReads())return!0;return!1}stop(t){void 0===t&&(t=1),this._clearAsync(),this._hasDur=!0,this._playEnd(t)}_clearAsync(){this._unregisterTrnsEnd&&this._unregisterTrnsEnd(),this._timerId&&clearTimeout(this._timerId),this._timerId=this._unregisterTrnsEnd=void 0}_progress(t){let i;const e=this._elements,n=this._fxProperties,r=this._elementTotal;if(!e||!n||!r||this._destroyed)return;this._isReverse&&(t=1-t);let a,o=0,h=0,l="";for(o=0;o<n.length;o++)if((a=n[o]).from&&a.to){const s=a.from.num,n=a.to.num,o=s!==n;if(o&&(this._hasTweenEffect=!0),0===t)i=a.from.val;else if(1===t)i=a.to.val;else if(o){let e=(n-s)*t+s;const r=a.to.effectUnit;"px"===r&&(e=e),i=e+r}if(null!==i){const t=a.effectName;if(a.trans)l+=t+"("+i+") ";else for(h=0;h<r;h++)e[h].style[t]=i}}if(l.length)for((!this._isReverse&&1!==t||this._isReverse&&0!==t)&&(l+="translateZ(0px)"),o=0;o<e.length;o++)e[o].style[s.transformProp]=l}_setTrans(t,i){const e=this._elements,n=this._elementTotal;if(!e||!this._fxProperties||0===n)return;const r=i?"linear":this.getEasing(),a=t+"ms",o=s.transitionProp,h=s.transitionDurationProp,l=s.transitionTimingFnProp;let _;for(let s=0;s<n;s++)_=e[s].style,t>0?(_[o]="",_[h]=a,r&&(_[l]=r)):_[o]="none"}_beforeAnimation(){this._fireBeforeReadFunc(),this._fireBeforeWriteFunc(),this._setBeforeStyles()}_setBeforeStyles(){let t;const s=this._childAnimations;for(let t=0;t<this._childAnimationTotal;t++)s[t]._setBeforeStyles();const i=this._elements,e=this._elementTotal;if(!i||0===e||this._isReverse)return;const n=this._beforeAddClasses,r=this._beforeRemoveClasses;let a;for(let s=0;s<e;s++){const e=i[s],o=e.classList;if(n)for(t=0;t<n.length;t++)o.add(n[t]);if(r)for(t=0;t<r.length;t++)o.remove(r[t]);if(this._beforeStyles)for(a in this._beforeStyles)e.style[a]=this._beforeStyles[a]}}_fireBeforeReadFunc(){const t=this._childAnimations;let s=0;for(s=0;s<this._childAnimationTotal;s++)t[s]._fireBeforeReadFunc();const i=this._readCallbacks;if(i)for(s=0;s<i.length;s++)i[s]()}_fireBeforeWriteFunc(){const t=this._childAnimations;let s=0;for(s=0;s<this._childAnimationTotal;s++)t[s]._fireBeforeWriteFunc();const i=this._writeCallbacks;if(this._writeCallbacks)for(s=0;s<i.length;s++)i[s]()}_setAfterStyles(){let t,i,e,n;const r=this._elements;if(!r)return;let a;for(t=0;t<this._elementTotal;t++)if(n=(e=r[t]).classList,e.style[s.transitionDurationProp]=e.style[s.transitionTimingFnProp]="",this._isReverse){if(this._beforeAddClasses)for(i=0;i<this._beforeAddClasses.length;i++)n.remove(this._beforeAddClasses[i]);if(this._beforeRemoveClasses)for(i=0;i<this._beforeRemoveClasses.length;i++)n.add(this._beforeRemoveClasses[i]);if(this._beforeStyles)for(a in this._beforeStyles)e.style[a]=""}else{if(this._afterAddClasses)for(i=0;i<this._afterAddClasses.length;i++)n.add(this._afterAddClasses[i]);if(this._afterRemoveClasses)for(i=0;i<this._afterRemoveClasses.length;i++)n.remove(this._afterRemoveClasses[i]);if(this._afterStyles)for(a in this._afterStyles)e.style[a]=this._afterStyles[a]}}_willChange(t){let s;const i=this._fxProperties;let e;if(t&&i){s=[];for(let t=0;t<i.length;t++){const e=i[t].wc;"webkitTransform"===e?s.push("transform","-webkit-transform"):e&&s.push(e)}e=s.join(",")}else e="";const n=this._elements;if(n)for(let t=0;t<this._elementTotal;t++)n[t].style.willChange=e}progressStart(){this._clearAsync(),this._beforeAnimation(),this._progressStart()}_progressStart(){const t=this._childAnimations;for(let s=0;s<this._childAnimationTotal;s++)t[s]._progressStart();this._setTrans(0,!0),this._willChange(!0)}progressStep(t){t=Math.min(1,Math.max(0,t));const s=this._childAnimations;for(let i=0;i<this._childAnimationTotal;i++)s[i].progressStep(t);this._progress(t)}progressEnd(t,s,i){this._isReverse&&(s=1-s);const e=t?1:0,n=Math.abs(s-e);void 0===i&&(i=-1),i<0?i=this._duration||0:n<.05&&(i=0),this._isAsync=i>30,this._progressEnd(t,e,i,this._isAsync),this._isAsync&&(this._asyncEnd(i,t),this._destroyed||a(()=>{this._playToStep(e)}))}_progressEnd(t,s,i,e){const n=this._childAnimations;for(let r=0;r<this._childAnimationTotal;r++)n[r]._progressEnd(t,s,i,e);e?(this.isPlaying=!0,this.hasCompleted=!1,this._hasDur=!0,this._willChange(!0),this._setTrans(i,!1)):(this._progress(s),this._willChange(!1),this._setAfterStyles(),this._didFinish(t))}onFinish(t,s){return s&&s.clearExistingCallacks&&(this._onFinishCallbacks=this._onFinishOneTimeCallbacks=void 0),s&&s.oneTimeCallback?(this._onFinishOneTimeCallbacks=this._onFinishOneTimeCallbacks||[],this._onFinishOneTimeCallbacks.push(t)):(this._onFinishCallbacks=this._onFinishCallbacks||[],this._onFinishCallbacks.push(t)),this}_didFinishAll(t,s,i){const e=this._childAnimations;for(let n=0;n<this._childAnimationTotal;n++)e[n]._didFinishAll(t,s,i);(s&&this._isAsync||i&&!this._isAsync)&&this._didFinish(t)}_didFinish(t){this.isPlaying=!1,this.hasCompleted=t;let s=0;if(this._onFinishCallbacks)for(s=0;s<this._onFinishCallbacks.length;s++)this._onFinishCallbacks[s](this);if(this._onFinishOneTimeCallbacks){for(s=0;s<this._onFinishOneTimeCallbacks.length;s++)this._onFinishOneTimeCallbacks[s](this);this._onFinishOneTimeCallbacks.length=0}}reverse(t){void 0===t&&(t=!0);const s=this._childAnimations;for(let i=0;i<this._childAnimationTotal;i++)s[i].reverse(t);return this._isReverse=t,this}destroy(){this._destroyed=!0;const t=this._childAnimations;for(let s=0;s<this._childAnimationTotal;s++)t[s].destroy();this._clearAsync(),this._elements&&(this._elements.length=this._elementTotal=0),this._readCallbacks&&(this._readCallbacks.length=0),this._writeCallbacks&&(this._writeCallbacks.length=0),this.parent=void 0,this._childAnimations&&(this._childAnimations.length=this._childAnimationTotal=0),this._onFinishCallbacks&&(this._onFinishCallbacks.length=0),this._onFinishOneTimeCallbacks&&(this._onFinishOneTimeCallbacks.length=0)}_transEl(){for(let t=0;t<this._childAnimationTotal;t++){const s=this._childAnimations[t]._transEl();if(s)return s}return this._hasTweenEffect&&this._hasDur&&this._elements&&this._elementTotal>0?this._elements[0]:null}}class h{create(t,s,i){return t?t(o,s,i):Promise.resolve(new o)}static get is(){return"ion-animation-controller"}static get properties(){return{create:{method:!0}}}}export{h as IonAnimationController};